<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wepoll | 우리들의 투자 폴</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-white font-sans">

    <header class="fixed top-0 left-0 right-0 z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800">
        <div class="max-w-md mx-auto px-4 h-14 flex items-center justify-between">
            <h1 class="text-2xl font-black tracking-tighter text-blue-500 cursor-pointer" onclick="location.href='index.html'">WEPOLL</h1>
            <div class="flex gap-4">
                <button class="hover:text-blue-400 p-2" onclick="location.href='auth.html'" aria-label="마이페이지">👤</button>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 pt-20 pb-10">
        <section class="live-banner rounded-2xl p-6 mb-8 relative overflow-hidden">
            <div class="relative z-10">
                <span class="inline-flex items-center bg-red-600 px-2 py-0.5 rounded text-[10px] font-bold mb-2">
                    <span class="w-1.5 h-1.5 bg-white rounded-full mr-1 animate-ping"></span> LIVE
                </span>
                <h2 class="text-xl font-bold leading-tight">슈카월드와 함께하는<br>실시간 민심 확인 중!</h2>
                <button class="mt-4 px-4 py-2 bg-white text-black text-sm font-bold rounded-full hover:bg-gray-200 transition">참여하기</button>
            </div>
            <div class="absolute right-[-20px] bottom-[-20px] opacity-20 text-8xl" aria-hidden="true">📊</div>
        </section>

        <section class="mb-10">
            <h3 class="text-lg font-bold mb-4 flex items-center gap-2">🔮 투자 운세 서비스</h3>
            <div class="flex gap-2 overflow-x-auto no-scrollbar pb-2 px-1">
                <div class="fortune-card fortune-gold">
                    <span class="text-2xl">📅</span>
                    <p class="text-sm font-bold mt-1">오늘의 운세</p>
                    <p class="text-[10px] opacity-70 italic">"매수운 상승"</p>
                </div>
                <div class="fortune-card fortune-red">
                    <span class="text-2xl">🗓️</span>
                    <p class="text-sm font-bold mt-1">주간 운세</p>
                    <p class="text-[10px] opacity-70 italic">"금요일 주의"</p>
                </div>
                <div class="fortune-card fortune-blue">
                    <span class="text-2xl">📜</span>
                    <p class="text-sm font-bold mt-1">신토정비결</p>
                    <p class="text-[10px] opacity-70 italic">"2026 대운"</p>
                </div>
            </div>
        </section>

        <section>
            <div class="flex justify-between items-end mb-4">
                <h3 class="text-2xl font-black italic tracking-tighter uppercase">Hot Polls</h3>
                <button class="text-sm text-gray-500 hover:text-gray-300">더보기 +</button>
            </div>

            <div class="poll-card glass-card rounded-3xl p-6">
                <div class="flex items-center gap-2 mb-4">
                    <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-[10px]">W</div>
                    <span class="text-xs font-semibold text-gray-300">위폴 공식 에디터</span>
                </div>
                <h4 class="text-xl font-bold mb-6 break-keep leading-snug">"삼성전자 8만전자 탈환, 이번 주 안에 가능할까요?"</h4>
                
                <div class="grid gap-3">
                    <button id="btn-up" class="poll-btn-container relative overflow-hidden group w-full text-left">
                        <div id="bar-up" class="poll-bar absolute top-0 left-0 h-full bg-blue-600/20" style="width: 0%"></div>
                        <div class="relative z-10 flex justify-between w-full px-5 py-4 border border-blue-500/30 rounded-xl group-hover:bg-blue-600/10 transition">
                            <span class="font-bold text-blue-400">📈 무조건 간다</span>
                            <span id="percent-up" class="font-mono font-bold">0%</span>
                        </div>
                    </button>

                    <button id="btn-down" class="poll-btn-container relative overflow-hidden group w-full text-left">
                        <div id="bar-down" class="poll-bar absolute top-0 left-0 h-full bg-red-600/20" style="width: 0%"></div>
                        <div class="relative z-10 flex justify-between w-full px-5 py-4 border border-red-500/30 rounded-xl group-hover:bg-red-600/10 transition">
                            <span class="font-bold text-red-400">📉 아직은 힘들다</span>
                            <span id="percent-down" class="font-mono font-bold">0%</span>
                        </div>
                    </button>
                </div>
                
                <div class="mt-6 flex justify-between items-center text-[11px] text-gray-500 border-t border-gray-800 pt-4">
                    <span id="total-votes">👥 0명 참여</span>
                    <span class="flex items-center gap-1">⏱️ 14:20:05 남음</span>
                </div>
            </div>
        </section>
    </main>

    <script>
        const STORAGE_KEY = 'wepoll_vote_v1';
        let voteData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
            up: 7680, down: 4725, voted: false
        };

        function updateDisplay() {
            const total = voteData.up + voteData.down;
            const upPercent = Math.round((voteData.up / total) * 100);
            const downPercent = 100 - upPercent;

            document.getElementById('percent-up').innerText = upPercent + '%';
            document.getElementById('percent-down').innerText = downPercent + '%';
            document.getElementById('total-votes').innerText = `👥 ${total.toLocaleString()}명 참여`;
            document.getElementById('bar-up').style.width = upPercent + '%';
            document.getElementById('bar-down').style.width = downPercent + '%';
            
            if (voteData.voted) {
                document.querySelectorAll('.poll-btn-container').forEach(btn => btn.disabled = true);
            }
        }

        function castVote(type) {
            if (voteData.voted) return alert("이미 투표에 참여하셨습니다!");
            voteData[type]++;
            voteData.voted = true;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(voteData));
            updateDisplay();
        }

        document.getElementById('btn-up').addEventListener('click', () => castVote('up'));
        document.getElementById('btn-down').addEventListener('click', () => castVote('down'));
        
        updateDisplay();
    </script>
</body>
</html>